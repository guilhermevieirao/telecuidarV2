@if (isOpen) {
  <div class="modal-backdrop" (click)="onBackdropClick()">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal__header">
        <div class="modal__header-content">
          <app-icon name="mail" [size]="24" />
          <h2 class="modal__title">Novo Convite</h2>
        </div>
        <button
          type="button"
          class="modal__close"
          (click)="onCancel()"
          aria-label="Fechar"
        >
          <app-icon name="close" [size]="24" />
        </button>
      </div>

      <div class="modal__body">
        <form class="invite-form">
          <div class="invite-form__field">
            <label for="invite-name" class="invite-form__label">
              Nome
              <span class="invite-form__label-hint">(opcional)</span>
            </label>
            <input
              id="invite-name"
              type="text"
              class="invite-form__input"
              [(ngModel)]="inviteData.name"
              name="name"
              placeholder="Ex: JoÃ£o"
            />
          </div>

          <div class="invite-form__field">
            <label for="invite-lastName" class="invite-form__label">
              Sobrenome
              <span class="invite-form__label-hint">(opcional)</span>
            </label>
            <input
              id="invite-lastName"
              type="text"
              class="invite-form__input"
              [(ngModel)]="inviteData.lastName"
              name="lastName"
              placeholder="Ex: Silva"
            />
          </div>

          <div class="invite-form__field">
            <label for="invite-email" class="invite-form__label">
              E-mail
              <span class="invite-form__label-hint">(opcional para gerar link)</span>
            </label>
            <input
              id="invite-email"
              type="email"
              class="invite-form__input"
              [(ngModel)]="inviteData.email"
              name="email"
              placeholder="Ex: joao.silva@email.com"
            />
          </div>

          <div class="invite-form__field">
            <label for="invite-cpf" class="invite-form__label">
              CPF
              <span class="invite-form__label-hint">(opcional)</span>
            </label>
            <input
              id="invite-cpf"
              type="text"
              class="invite-form__input"
              [(ngModel)]="inviteData.cpf"
              name="cpf"
              placeholder="Ex: 000.000.000-00"
              appCpfMask
            />
          </div>

          <div class="invite-form__field">
            <label for="invite-phone" class="invite-form__label">
              Telefone
              <span class="invite-form__label-hint">(opcional)</span>
            </label>
            <input
              id="invite-phone"
              type="tel"
              class="invite-form__input"
              [(ngModel)]="inviteData.phone"
              name="phone"
              placeholder="Ex: (00) 00000-0000"
              appPhoneMask
            />
          </div>

          <div class="invite-form__field">
            <label for="invite-role" class="invite-form__label">Perfil de Acesso</label>
            <select
              id="invite-role"
              class="invite-form__select"
              [(ngModel)]="inviteData.role"
              name="role"
            >
              <option *ngFor="let option of roleOptions" [value]="option.value">{{ option.label }}</option>
            </select>
          </div>
        </form>
      </div>

      <div class="modal__footer">
        <app-button
          [variant]="'outline'"
          (click)="onCancel()"
        >
          Cancelar
        </app-button>

        <app-button
          [variant]="'secondary'"
          (click)="onGenerateLink()"
          [disabled]="!isFormValidForLink()"
        >
          <app-icon name="plus" [size]="18" />
          Gerar Link
        </app-button>

        <app-button
          [variant]="'primary'"
          (click)="onSendEmail()"
          [disabled]="!isFormValidForEmail()"
        >
          <app-icon name="mail" [size]="18" />
          Enviar Email
        </app-button>
      </div>
    </div>
  </div>
}
