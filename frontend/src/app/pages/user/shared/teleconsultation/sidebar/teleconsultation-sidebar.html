<div class="tele-sidebar" [class.open]="isOpen" [class.full-screen]="isFullScreen" [class.with-header]="isHeaderVisible">
  <div class="sidebar-header">
    <div class="sidebar-actions">
      <button 
        class="icon-btn dictation-btn" 
        [class.active]="isDictationActive"
        [class.listening]="isListening"
        (click)="toggleDictation()" 
        title="Modo Ditado">
        <app-icon [name]="isDictationActive ? 'mic' : 'mic-off'" [size]="20" />
      </button>
      <button class="icon-btn resize-btn" (click)="onToggleMode()" [title]="isFullScreen ? 'Modo Lateral' : 'Tela Cheia'">
        <app-icon [name]="isFullScreen ? 'minus' : 'plus'" [size]="20" />
      </button>
      <button class="icon-btn close-btn" (click)="onToggle()">
        <app-icon name="close" [size]="20" />
      </button>
    </div>
  </div>

  <div class="sidebar-tabs">
    <button 
      *ngFor="let tab of tabs" 
      class="tab-btn" 
      [class.active]="activeTab === tab"
      (click)="onTabChange(tab)">
      {{ tab }}
    </button>
  </div>

  <div class="sidebar-content">
    <div class="tab-content" *ngIf="activeTab === 'Biométricos'">
      <app-biometrics-tab 
        [appointmentId]="appointmentId" 
        [userRole]="userRole">
      </app-biometrics-tab>
    </div>

    <div class="tab-content" *ngIf="activeTab === 'Chat Anexos'" style="height: 100%">
      <app-attachments-chat-tab
        [appointmentId]="appointmentId"
        [userRole]="userRole">
      </app-attachments-chat-tab>
    </div>

    <div class="tab-content" *ngIf="activeTab === 'SOAP'">
      <app-soap-tab
        [appointmentId]="appointmentId"
        [userRole]="userRole">
      </app-soap-tab>
    </div>

    <div class="tab-content" *ngIf="activeTab === 'Concluir'" style="height: 100%">
      <app-conclusion-tab
        [appointment]="appointment"
        (finish)="onFinishConsultation($event)">
      </app-conclusion-tab>
    </div>

    <div class="tab-content" *ngIf="activeTab !== 'Biométricos' && activeTab !== 'Chat Anexos' && activeTab !== 'SOAP' && activeTab !== 'Concluir'">
      <h3>Conteúdo da Aba {{ activeTab }}</h3>
      <p>Aqui vai o conteúdo específico para {{ userRole === 'professional' ? 'o Profissional' : 'o Paciente' }}.</p>
    </div>
  </div>
</div>
